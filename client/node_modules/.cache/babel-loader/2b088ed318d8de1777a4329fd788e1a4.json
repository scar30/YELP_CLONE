{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\OneDrive\\\\Desktop\\\\PERN-STACK-YELP-CLONE-master\\\\client\\\\src\\\\components\\\\RestaurantList.jsx\";\nimport React, { useEffect, useContext } from \"react\";\nimport RestaurantFinder from \"../apis/RestaurantFinder\";\nimport { RestaurantsContext } from \"../context/RestaurantsContext\";\nimport { useHistory } from \"react-router-dom\";\nimport StarRating from \"./StarRating\";\nconst RestaurantList = props => {\n  const {\n    restaurants,\n    setRestaurants\n  } = useContext(RestaurantsContext);\n  let history = useHistory();\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await RestaurantFinder.get(\"/\");\n        console.log(response.data.data);\n        setRestaurants(response.data.data.restaurants);\n      } catch (err) {}\n    };\n    fetchData();\n  }, []);\n  const handleDelete = async (e, id) => {\n    e.stopPropagation();\n    try {\n      const response = await RestaurantFinder.delete(`/${id}`);\n      setRestaurants(restaurants.filter(restaurant => {\n        return restaurant.id !== id;\n      }));\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  const handleUpdate = (e, id) => {\n    e.stopPropagation();\n    history.push(`/restaurants/${id}/update`);\n  };\n  const handleRestaurantSelect = id => {\n    history.push(`/restaurants/${id}`);\n  };\n  const renderRating = restaurant => {\n    if (!restaurant.count) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: \"text-warning\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 14\n        }\n      }, \"0 reviews\");\n    }\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(StarRating, {\n      rating: restaurant.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-warning ml-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }\n    }, \"(\", restaurant.count, \")\"));\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"list-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table table-hover table-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"bg-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, \"Restaurant\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, \"Location\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, \"Price Range\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, \"Ratings\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, \"Edit\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, \"Delete\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, restaurants && restaurants.map(restaurant => {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      onClick: () => handleRestaurantSelect(restaurant.id),\n      key: restaurant.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 19\n      }\n    }, restaurant.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 19\n      }\n    }, restaurant.location), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 19\n      }\n    }, \"$\".repeat(restaurant.price_range)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 19\n      }\n    }, renderRating(restaurant)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: e => handleUpdate(e, restaurant.id),\n      className: \"btn btn-warning\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }\n    }, \"Update\")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: e => handleDelete(e, restaurant.id),\n      className: \"btn btn-danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }\n    }, \"Delete\")));\n  }))));\n};\nexport default RestaurantList;","map":{"version":3,"names":["React","useEffect","useContext","RestaurantFinder","RestaurantsContext","useHistory","StarRating","RestaurantList","props","restaurants","setRestaurants","history","fetchData","response","get","console","log","data","err","handleDelete","e","id","stopPropagation","delete","filter","restaurant","handleUpdate","push","handleRestaurantSelect","renderRating","count","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Fragment","rating","scope","map","onClick","key","name","location","repeat","price_range"],"sources":["C:/Users/user/OneDrive/Desktop/PERN-STACK-YELP-CLONE-master/client/src/components/RestaurantList.jsx"],"sourcesContent":["import React, { useEffect, useContext } from \"react\";\nimport RestaurantFinder from \"../apis/RestaurantFinder\";\nimport { RestaurantsContext } from \"../context/RestaurantsContext\";\nimport { useHistory } from \"react-router-dom\";\nimport StarRating from \"./StarRating\";\n\nconst RestaurantList = (props) => {\n  const { restaurants, setRestaurants } = useContext(RestaurantsContext);\n  let history = useHistory();\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await RestaurantFinder.get(\"/\");\n        console.log(response.data.data);\n        setRestaurants(response.data.data.restaurants);\n      } catch (err) {}\n    };\n\n    fetchData();\n  }, []);\n\n  const handleDelete = async (e, id) => {\n    e.stopPropagation();\n    try {\n      const response = await RestaurantFinder.delete(`/${id}`);\n      setRestaurants(\n        restaurants.filter((restaurant) => {\n          return restaurant.id !== id;\n        })\n      );\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleUpdate = (e, id) => {\n    e.stopPropagation();\n    history.push(`/restaurants/${id}/update`);\n  };\n\n  const handleRestaurantSelect = (id) => {\n    history.push(`/restaurants/${id}`);\n  };\n\n  const renderRating = (restaurant) => {\n    if (!restaurant.count) {\n      return <span className=\"text-warning\">0 reviews</span>;\n    }\n    return (\n      <>\n        <StarRating rating={restaurant.id} />\n        <span className=\"text-warning ml-1\">({restaurant.count})</span>\n      </>\n    );\n  };\n\n  return (\n    <div className=\"list-group\">\n      <table className=\"table table-hover table-dark\">\n        <thead>\n          <tr className=\"bg-primary\">\n            <th scope=\"col\">Restaurant</th>\n            <th scope=\"col\">Location</th>\n            <th scope=\"col\">Price Range</th>\n            <th scope=\"col\">Ratings</th>\n            <th scope=\"col\">Edit</th>\n            <th scope=\"col\">Delete</th>\n          </tr>\n        </thead>\n        <tbody>\n          {restaurants &&\n            restaurants.map((restaurant) => {\n              return (\n                <tr\n                  onClick={() => handleRestaurantSelect(restaurant.id)}\n                  key={restaurant.id}\n                >\n                  <td>{restaurant.name}</td>\n                  <td>{restaurant.location}</td>\n                  <td>{\"$\".repeat(restaurant.price_range)}</td>\n                  <td>{renderRating(restaurant)}</td>\n                  <td>\n                    <button\n                      onClick={(e) => handleUpdate(e, restaurant.id)}\n                      className=\"btn btn-warning\"\n                    >\n                      Update\n                    </button>\n                  </td>\n                  <td>\n                    <button\n                      onClick={(e) => handleDelete(e, restaurant.id)}\n                      className=\"btn btn-danger\"\n                    >\n                      Delete\n                    </button>\n                  </td>\n                </tr>\n              );\n            })}\n          {/* <tr>\n            <td>mcdonalds</td>\n            <td>New YOrk</td>\n            <td>$$</td>\n            <td>Rating</td>\n            <td>\n              <button className=\"btn btn-warning\">Update</button>\n            </td>\n            <td>\n              <button className=\"btn btn-danger\">Delete</button>\n            </td>\n          </tr>\n\n          <tr>\n            <td>mcdonalds</td>\n            <td>New YOrk</td>\n            <td>$$</td>\n            <td>Rating</td>\n            <td>\n              <button className=\"btn btn-warning\">Update</button>\n            </td>\n            <td>\n              <button className=\"btn btn-danger\">Delete</button>\n            </td>\n          </tr> */}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default RestaurantList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}